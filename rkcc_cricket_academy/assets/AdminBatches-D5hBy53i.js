import{g as r,j as e,B as f,k as y}from"./index-CRBeZLeH.js";import{a as c}from"./api-DRkCBYxQ.js";import{P as k,T as v,M as w}from"./Modal-B_u0SVFU.js";import{C as B}from"./clock-Bty5Boam.js";import{U as C}from"./users-BvK4V1-r.js";import{S}from"./square-pen-BG1vjrNn.js";const A=()=>{const[d,i]=r.useState([]),[g,m]=r.useState(!0),[x,o]=r.useState(!1),[n,u]=r.useState(null),[t,l]=r.useState({name:"",time:"",coach:"",capacity:20});r.useEffect(()=>{b()},[]);const b=async()=>{m(!0);const a=await c.admin.getBatches();i(a),m(!1)},h=(a=null)=>{a?(u(a.id),l({name:a.name,time:a.time,coach:a.coach,capacity:a.capacity})):(u(null),l({name:"",time:"",coach:"",capacity:20})),o(!0)},j=async a=>{if(a.preventDefault(),n){const s=await c.admin.updateBatch(n,t);i(d.map(p=>p.id===n?s:p))}else{const s=await c.admin.createBatch(t);i([...d,s])}o(!1)},N=async a=>{window.confirm("Delete this batch?")&&(await c.admin.deleteBatch(a),i(d.filter(s=>s.id!==a)))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Batch Management"}),e.jsxs(f,{onClick:()=>h(),className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"})," Create Batch"]})]}),g&&!x?e.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading batches..."}):e.jsx("div",{className:"grid gap-4",children:d.map((a,s)=>e.jsxs(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s*.1},className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col md:flex-row justify-between items-center group",children:[e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:a.name}),e.jsxs("div",{className:"flex items-center text-sm text-slate-500 space-x-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(B,{className:"w-4 h-4 mr-1"})," ",a.time]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(C,{className:"w-4 h-4 mr-1"})," ",a.coach]})]})]}),e.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto",children:[e.jsxs("div",{className:"flex-1 md:w-48",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:"Capacity"}),e.jsxs("span",{className:"font-bold",children:[a.students||0,"/",a.capacity]})]}),e.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${(a.students||0)/a.capacity*100}%`}})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(a),className:"p-2 border border-slate-200 dark:border-slate-600 rounded hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",children:e.jsx(S,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N(a.id),className:"p-2 border border-red-200 dark:border-red-900/30 rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500",children:e.jsx(v,{className:"w-4 h-4"})})]})]})]},a.id))}),e.jsx(w,{isOpen:x,onClose:()=>o(!1),title:n?"Edit Batch":"Create Batch",children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Batch Name"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary outline-none",value:t.name,onChange:a=>l({...t,name:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Timing"}),e.jsx("input",{type:"text",required:!0,placeholder:"e.g. 06:00 AM - 08:00 AM",className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary outline-none",value:t.time,onChange:a=>l({...t,time:a.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Coach"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary outline-none",value:t.coach,onChange:a=>l({...t,coach:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Capacity"}),e.jsx("input",{type:"number",required:!0,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary outline-none",value:t.capacity,onChange:a=>l({...t,capacity:parseInt(a.target.value)})})]})]}),e.jsx(f,{type:"submit",className:"w-full mt-4",children:"Save Batch"})]})})]})};export{A as AdminBatches};
